# 电商系统异常状态码规范（SSMMTNNN）

## 版本
v1.0  
最后更新：2026-02-04  
适用系统：电商主系统（SS = 10）

## 📌 一、编码结构

错误码采用 **8 位数字字符串**，格式为：SSMMTNNN

- SS: 系统标识 (System Identifier)
- MM: 模块标识 (Module Identifier) 
- T: 错误类型 (Error Type)
- NNN: 错误序号 (Error Number)

## 🧩 二、模块标识（MM）

- 01: 用户模块
- 02: 商品模块
- 03: 订单模块
- 04: 库存模块
- 05: 支付模块
- 06: 营销模块
- 07: 物流模块
- 08: 评价模块
- 09: 智能员工模块
- 其他: 按需分配

## ⚠️ 三、错误类型（T）

- 0: 成功 (Success)
- 1: 参数错误 (Parameter Error)
- 2: 业务错误 (Business Error) 
- 3: 远程调用错误 (Remote Call Error)
- 4: 数据库错误 (Database Error)
- 5: 系统错误 (System Error)
- 6: 权限错误 (Permission Error)
- 7: 认证错误 (Authentication Error)
- 8: 资源错误 (Resource Error)
- 9: 其他错误 (Other Error)

## 🗂️ 四、错误序号（NNN）分配策略（按错误类型分段）

为便于维护与扩展，**每个模块内按错误类型对 NNN 进行分段预留**：

- 001-099: 基础参数校验错误
- 100-199: 业务规则验证错误
- 200-299: 业务状态验证错误
- 300-399: 远程服务调用错误
- 400-499: 数据库操作错误
- 500-599: 系统级错误
- 600-699: 权限认证错误
- 700-799: 资源操作错误
- 800-899: 第三方服务错误
- 900-999: 其他错误

✅ **优势**：
- 避免不同类型错误码冲突
- 支持快速人工识别错误性质
- 为各类型预留充足编号空间

## 📝 五、错误码设计原则

### 1. 预留空间
- 严格遵循上述 NNN 分段规则。
- 即使当前错误较少，也**不得跨段使用**（如 T=2 不得使用 050）。
- 新增错误时优先在对应段内顺序分配。

### 2. 参数化消息
- 所有含动态内容的错误消息**必须使用 {0}, {1}, {2}... 占位符**。
- 示例：
  - 商品 {0} 库存不足，当前库存 {1}  
  - 订单金额 {0} 超过单笔限额 {1}
- 禁止将具体值硬编码进错误模板（如"商品 A 库存不足"）。

### 3. 全局唯一
- 错误码 01MMTNNN 在整个电商系统中**必须全局唯一**。
- 不同模块、不同错误类型之间不得重复。
- 建议通过 **中心化注册机制**（如枚举类 + CI 校验）确保唯一性。

### 4. 文档同步
- 所有错误码必须在此文档中登记。
- 推荐配套维护在线文档（如 Confluence、Swagger Error Catalog）。
- 每次新增/修改错误码，需同步更新本规范及代码枚举。

## 🧾 六、错误码示例（部分）

- 01011001 - 用户模块参数错误001号
- 01022001 - 商品模块业务错误001号
- 01033001 - 订单模块远程调用错误001号

## 🛠️ 七、开发集成建议

- 使用统一异常处理框架捕获业务异常，并返回标准错误码。
- 提供工具方法支持消息格式化：
  ```java
  String msg = errorCode.getFormattedMessage(arg1, arg2);
  ```
- 在 API 响应中返回结构化错误信息：
  ```json
  {
    "code": "01022104", 
    "message": "商品 P1001 库存不足，当前库存 5"
  }
  ```

## 附件：规范维护责任人

各模块负责人：负责本模块错误码申请与登记

✅ **本规范自发布之日起生效，所有新功能必须遵守。**